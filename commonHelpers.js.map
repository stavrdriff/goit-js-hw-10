{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return initTimer({ days, hours, minutes, seconds });\n}\n\nconst initTimer = ({days, hours, minutes, seconds}) => {\n  const daysTarget = document.querySelector('[data-days]');\n  const hoursTarget = document.querySelector('[data-hours]');\n  const minutesTarget = document.querySelector('[data-minutes]');\n  const secondsTarget = document.querySelector('[data-seconds]');\n\n  daysTarget.textContent = days;\n  hoursTarget.textContent = hours;\n  minutesTarget.textContent = minutes;\n  secondsTarget.textContent = seconds;\n}\n\nconst errorMessage = () => {\n  iziToast.error({\n    class: 'error-message',\n    theme: 'dark',\n    backgroundColor: '#ef4040',\n    messageColor: '#fff',\n    color: '#fff',\n    icon: 'icon-x-octagon',\n    iconColor: '#fff',\n    position: 'topRight',\n    pauseOnHover: true,\n    timeout: 5000,\n    message: 'Please choose a date in the future'\n  });\n}\n\nconst timerHandler = (selectedDate, input, trigger) => {\n  trigger.removeAttribute('disabled');\n  input.removeAttribute('disabled');\n  let intervalID;\n\n  trigger.addEventListener('click', () => {\n    if (!intervalID) {\n      trigger.setAttribute('disabled', '');\n      input.setAttribute('disabled', '');\n\n      intervalID = setInterval(() => {\n        convertMs(selectedDate - Date.now());\n      }, 1000)\n    }\n    else {\n      clearInterval(intervalID);\n      intervalID = null;\n    }\n  });\n}\n\nconst initInputTimer = () => {\n  const input = document.querySelector('#datetime-picker');\n  const trigger = document.querySelector('[data-start]');\n  let userSelectedDate;\n\n  if (!input || !trigger) {\n    return;\n  }\n\n  trigger.setAttribute('disabled', '');\n\n  const options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    dateFormat: 'Y-m-d h:m',\n    onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      if (userSelectedDate <= Date.now()) {\n        trigger.setAttribute('disabled', '');\n        errorMessage();\n      } else {\n        timerHandler(userSelectedDate, input, trigger);\n      }\n    }\n  };\n\n  flatpickr(input, options);\n}\n\ninitInputTimer();"],"names":["convertMs","ms","days","hours","minutes","seconds","initTimer","daysTarget","hoursTarget","minutesTarget","secondsTarget","errorMessage","iziToast","timerHandler","selectedDate","input","trigger","intervalID","initInputTimer","userSelectedDate","flatpickr","selectedDates"],"mappings":"iyBAKA,SAASA,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,OAAOK,EAAU,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAAE,CACpD,CAEA,MAAMC,EAAY,CAAC,CAAC,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,IAAM,CACrD,MAAME,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAgB,SAAS,cAAc,gBAAgB,EACvDC,EAAgB,SAAS,cAAc,gBAAgB,EAE7DH,EAAW,YAAcL,EACzBM,EAAY,YAAcL,EAC1BM,EAAc,YAAcL,EAC5BM,EAAc,YAAcL,CAC9B,EAEMM,EAAe,IAAM,CACzBC,EAAS,MAAM,CACb,MAAO,gBACP,MAAO,OACP,gBAAiB,UACjB,aAAc,OACd,MAAO,OACP,KAAM,iBACN,UAAW,OACX,SAAU,WACV,aAAc,GACd,QAAS,IACT,QAAS,oCACb,CAAG,CACH,EAEMC,EAAe,CAACC,EAAcC,EAAOC,IAAY,CACrDA,EAAQ,gBAAgB,UAAU,EAClCD,EAAM,gBAAgB,UAAU,EAChC,IAAIE,EAEJD,EAAQ,iBAAiB,QAAS,IAAM,CACjCC,GASH,cAAcA,CAAU,EACxBA,EAAa,OATbD,EAAQ,aAAa,WAAY,EAAE,EACnCD,EAAM,aAAa,WAAY,EAAE,EAEjCE,EAAa,YAAY,IAAM,CAC7BjB,EAAUc,EAAe,KAAK,IAAK,CAAA,CACpC,EAAE,GAAI,EAMb,CAAG,CACH,EAEMI,EAAiB,IAAM,CAC3B,MAAMH,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAU,SAAS,cAAc,cAAc,EACrD,IAAIG,EAEJ,GAAI,CAACJ,GAAS,CAACC,EACb,OAGFA,EAAQ,aAAa,WAAY,EAAE,EAmBnCI,EAAUL,EAjBM,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,WAAY,YACZ,QAAQM,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAC9BF,GAAoB,KAAK,OAC3BH,EAAQ,aAAa,WAAY,EAAE,EACnCL,KAEAE,EAAaM,EAAkBJ,EAAOC,CAAO,CAEhD,CACL,CAE0B,CAC1B,EAEAE,EAAgB"}